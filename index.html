<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CoinNectarBot — Auto Ad System (10 Ads)</title>
<style>
body{
  margin:0; padding:0;
  background:#061021; color:#e9fbf2;
  font-family:Arial,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh;
}
.container{
  background:rgba(255,255,255,0.02); padding:20px; border-radius:16px;
  width:340px; box-shadow:0 12px 40px rgba(0,0,0,0.6);
  position:relative;
}
h1{color:#00d48f; text-align:center;}
.stats{margin:10px 0;}
.stats p{margin:5px 0; font-size:14px;}
.progress-circle{width:80px; height:80px; border:4px solid #00d48f; border-radius:50%; display:flex; justify-content:center; align-items:center; margin:10px auto;}
.progress-circle span{font-size:18px; font-weight:bold;}
#current-ad{
  position:absolute; top:10px; right:15px;
  background:#00d48f; color:#021; font-weight:bold;
  padding:5px 10px; border-radius:10px; font-size:13px;
}
.btn-primary{
  background:#00d48f; color:#022;
  border:none; border-radius:6px;
  width:90%; padding:12px; margin:6px 0;
  font-size:15px; cursor:pointer;
}
.btn-primary:hover{background:#009966;}
</style>

<!-- 🔸 MoneyTag ad code (এইটা কাটা যাবে না) -->
<script src='//libtl.com/sdk.js' data-zone='10030164' data-sdk='show_10030164'></script>

</head>
<body>
<div class="container">
  <div id="current-ad">Ad 0/10</div>
  <h1>CoinNectarBot</h1>
  <div class="stats">
    <p>Watched Ads Today: <span id="watched-ads">0</span>/10</p>
    <p>Earned BTTC: <span id="earned-points">0</span></p>
  </div>
  <div class="progress-circle">
    <span id="ads-progress">0%</span>
  </div>
  <button class="btn-primary" id="watch-ad-btn">Start Ads</button>
</div>

<script>
const DAILY_ADS_LIMIT = 10;     // 🔸 এখন ১০ টা বিজ্ঞাপন
const BTTC_PER_AD = 100;        // প্রতিটা বিজ্ঞাপনে ১০০ BTTC
const AD_DURATION = 15;         // প্রতিটি বিজ্ঞাপনের সময় ১৫ সেকেন্ড

let watchedAdsCount = 0;
let earnedPoints = 0;
let adTimer = null;
let remainingTime = 0;
let adRunning = false;

const adsSpan = document.getElementById('watched-ads');
const pointsSpan = document.getElementById('earned-points');
const progressSpan = document.getElementById('ads-progress');
const watchBtn = document.getElementById('watch-ad-btn');
const currentAdDisplay = document.getElementById('current-ad');

function updateUI(){
  adsSpan.textContent = watchedAdsCount;
  pointsSpan.textContent = earnedPoints;
  progressSpan.textContent = Math.min(100, (watchedAdsCount/DAILY_ADS_LIMIT)*100).toFixed(0)+"%";
  currentAdDisplay.textContent = `Ad ${watchedAdsCount}/${DAILY_ADS_LIMIT}`;
}

function startAdsSequence(){
  watchBtn.disabled = true;
  playNextAd();
}

function playNextAd(){
  if(watchedAdsCount >= DAILY_ADS_LIMIT){
    watchBtn.textContent = "All 10 Ads Watched ✅";
    watchBtn.disabled = false;
    return;
  }

  adRunning = true;
  remainingTime = AD_DURATION;
  watchBtn.textContent = `Ad Running... ${remainingTime}s`;
  currentAdDisplay.textContent = `Ad ${watchedAdsCount+1}/${DAILY_ADS_LIMIT}`;

  // 🔸 Moneytag বিজ্ঞাপন দেখানো
  if(typeof show_10030164 === 'function'){
    show_10030164().catch(e=>console.log("Ad Load Error", e));
  }

  adTimer = setInterval(()=>{
    remainingTime--;
    watchBtn.textContent = `Ad Running... ${remainingTime}s`;

    if(remainingTime <= 0){
      clearInterval(adTimer);
      watchedAdsCount++;
      earnedPoints += BTTC_PER_AD;
      updateUI();

      if(watchedAdsCount < DAILY_ADS_LIMIT){
        setTimeout(playNextAd, 1000); // ১ সেকেন্ড পরে পরের বিজ্ঞাপন অটো শুরু
      }else{
        watchBtn.textContent = "All 10 Ads Watched ✅";
        watchBtn.disabled = false;
      }
    }
  },1000);
}

// 🔹 যদি ট্যাব মিনিমাইজ করা হয় — তখন টাইমার বন্ধ, ফিরে এলে আবার চালু
document.addEventListener("visibilitychange", ()=>{
  if(document.visibilityState === "hidden" && adRunning){
    clearInterval(adTimer);
    adRunning = false;
  } else if(document.visibilityState === "visible" && !adRunning && watchedAdsCount < DAILY_ADS_LIMIT){
    playNextAd();
  }
});

watchBtn.addEventListener("click", ()=>{
  if(!adRunning) startAdsSequence();
});

updateUI();
</script>
</body>
</html>
